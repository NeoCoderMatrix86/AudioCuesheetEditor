<!--
This file is part of AudioCuesheetEditor.

AudioCuesheetEditor is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

AudioCuesheetEditor is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Foobar.  If not, see
<http: //www.gnu.org/licenses />.
-->

@page "/"
<!--TODO: Werkzeugleiste-->
<!--TODO: Drag & Drop Dateien (und automatische Auswertung des ganzen)-->

<Accordion>
    <Collapse Visible="@cuesheetDataVisible">
        <CollapseHeader>
            <Blazorise.Link Clicked="CuesheetDataHeaderClicked" Style="justify-content: space-between;display: flex;-webkit-box-pack:justify;">
                <h3>Cuesheet Data</h3>
                <div>
                    @((MarkupString)chevronCuesheetData)
                </div>
            </Blazorise.Link>
        </CollapseHeader>
        <CollapseBody>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="cdTitleLabel">CD Title</span>
                </div>
                <!--TODO: Null safety for cuesheet-->
                <input type="text" class="form-control" id="cdTitle" aria-label="CD Title" aria-describedby="cdTitleLabel" placeholder="Enter CD title here" @bind="@cuesheet.Title">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="cdArtistLabel">CD Artist</span>
                </div>
                <!--TODO: Null safety for cuesheet-->
                <input type="text" class="form-control" id="cdArtist" aria-label="CD Artist" aria-describedby="cdTitleLabel" placeholder="Enter CD artist here" @bind="@cuesheet.Artist">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="cdCatalogueNumberLabel">CD Cataloguenumber</span>
                </div>
                <input type="text" class="form-control" id="cdCatalogueNumber" aria-label="CD Cataloguenumber" aria-describedby="cdCatalogueNumberLabel" placeholder="Enter CD cataloguenumber here">
            </div>
        </CollapseBody>
    </Collapse>
    <Collapse Visible="@cuesheetTracksVisible">
        <CollapseHeader>
            <Blazorise.Link Clicked="CuesheetTracksHeaderClicked" Style="justify-content: space-between;display: flex;-webkit-box-pack:justify;">
                <h3>Cuesheet Tracks</h3>
                <div>
                    @((MarkupString)chevronCuesheetTracks)
                </div>
            </Blazorise.Link>
        </CollapseHeader>
        <CollapseBody>
            <table class="table">
                <thead>
                    <tr>
                        <th>Position</th>
                        <th>Artist</th>
                        <th>Title</th>
                        <th>Begin</th>
                        <th>End</th>
                        <th>Length</th>
                        <th>Icon</th>
                    </tr>
                    @foreach (var track in cuesheet.Tracks)
                    {
                        <tr>
                            <!--TODO-->
                            <td>TODO</td>
                            <td>@track.Artist</td>
                            <td>@track.Title</td>
                            <td>@track.Begin</td>
                            <td>@track.End</td>
                            <td>TODO</td>
                            <td>TODO</td>
                        </tr>
                    }
                </thead>
                <!--TODO: Tracks, Buttons, etc. -->
            </table>
        </CollapseBody>
    </Collapse>
</Accordion>


<!--TODO-->

<div class="input-group mb-3">
    <div class="input-group-prepend">
        <span class="input-group-text" id="cdTextFileLabel">CD Textfile</span>
    </div>
    <input type="file" class="form-control" id="cdTextFile" accept="text/plain" aria-label="CD Textfile" aria-describedby="cdTextFileLabel" placeholder="Enter CD textfile here">
</div>
<div class="input-group mb-3">
    <div class="input-group-prepend">
        <span class="input-group-text" id="cdAudioFileLabel">Audiofile</span>
    </div>
    <input type="file" class="form-control" id="cdAudioFile" accept="audio/*" aria-label="Audiofile" aria-describedby="cdAudioFileLabel" placeholder="Enter audiofile here">
</div>


@code {
    private Boolean cuesheetDataVisible;
    private Boolean cuesheetTracksVisible;
    private String chevronCuesheetData = "<svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-chevron-down\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\" /></svg>";
    private String chevronCuesheetTracks = "<svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-chevron-down\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\" /></svg>";

    private Cuesheet cuesheet;

    protected override Task OnInitializedAsync()
    {
        //DEBUG Only for Design purpose
        cuesheet = new Cuesheet();
        cuesheet.Artist = "Demo Artist";
        cuesheet.Title = "Demo Title";
        var begin = TimeSpan.Zero;
        for (int i = 1; i < 10; i++)
        {
            var track = new Track(cuesheet);
            track.Artist = String.Format("Demo Track Artist {0}", i);
            track.Title = String.Format("Demo Track Title {0}", i);
            track.Begin = begin;
            begin = begin.Add(new TimeSpan(0, i, i));
            track.End = begin;
            cuesheet.AddTrack(track);
        }
        //DEBUG
        return base.OnInitializedAsync();
    }

    private void CuesheetDataHeaderClicked()
    {
        cuesheetDataVisible = !cuesheetDataVisible;
        if (cuesheetDataVisible == true)
        {
            chevronCuesheetData = "<svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-chevron-up\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z\"/></svg>";
        }
        else
        {
            chevronCuesheetData = "<svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-chevron-down\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\" /></svg>";
        }
    }

    private void CuesheetTracksHeaderClicked()
    {
        cuesheetTracksVisible = !cuesheetTracksVisible;
        if (cuesheetTracksVisible == true)
        {
            chevronCuesheetTracks = "<svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-chevron-up\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z\"/></svg>";
        }
        else
        {
            chevronCuesheetTracks = "<svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-chevron-down\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\" /></svg>";
        }
    }
}

